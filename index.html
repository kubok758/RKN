<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–†–ö–ù - Simulator Ultimate VIP</title>
    <style>
        /* –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò */
        *, *::before, *::after { box-sizing: border-box; }

        body {
            margin: 0; padding: 0; background-color: #050505; color: white;
            font-family: 'Segoe UI', Roboto, sans-serif; display: flex; flex-direction: column;
            align-items: center; min-height: 100vh; overflow-x: hidden;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        /* --- –ê–ù–ò–ú–ê–¶–ò–ò –û–ë–©–ò–ï --- */
        @keyframes shine { 
            0% { left: -100%; opacity: 0; } 
            50% { opacity: 0.5; }
            100% { left: 200%; opacity: 0; } 
        }
        @keyframes rgb-bg-flash { 0% { background-color: #ff0000; } 50% { background-color: #00ff00; } 100% { background-color: #0000ff; } }
        @keyframes hue-spin { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }
        @keyframes ultra-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes vpn-pulse { 0% { box-shadow: 0 0 5px red; } 50% { box-shadow: 0 0 15px red; } 100% { box-shadow: 0 0 5px red; } }
        @keyframes rainbow { 0% { border-color: red; box-shadow: 0 0 20px red; } 100% { border-color: blue; box-shadow: 0 0 20px blue; } }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 10px #ffd700; } 50% { box-shadow: 0 0 40px #ffd700; } 100% { box-shadow: 0 0 10px #ffd700; } }
        @keyframes glitch { 0% { transform: translate(0); } 20% { transform: translate(-3px, 3px); } 40% { transform: translate(-3px, -3px); } 100% { transform: translate(0); } }
        @keyframes blackhole { 0% { transform: scale(1); } 50% { transform: scale(0.95); } 100% { transform: scale(1); } }
        @keyframes shake-hard { 0% { transform: translate(1px, 1px); } 100% { transform: translate(-1px, -2px); } }
        @keyframes popIn { from{transform:scale(0.8);opacity:0} to{transform:scale(1);opacity:1} }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- –ê–ù–ò–ú–ê–¶–ò–ò –î–õ–Ø –ù–û–í–û–ì–û –ù–ï–û–ù–û–í–û–ì–û –ö–†–ò–°–¢–ê–õ–õ–ê --- */
        @keyframes neon-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes neon-breathe {
            0% { 
                box-shadow: 0 10px 30px rgba(0,0,0,0.9), inset 0 0 30px rgba(80, 0, 120, 0.2); 
                border-color: rgba(80, 0, 255, 0.3); 
            }
            50% { 
                box-shadow: 0 15px 50px rgba(80, 0, 255, 0.2), inset 0 0 50px rgba(0, 200, 255, 0.3); 
                border-color: rgba(0, 200, 255, 0.6); 
            }
            100% { 
                box-shadow: 0 10px 30px rgba(0,0,0,0.9), inset 0 0 30px rgba(80, 0, 120, 0.2); 
                border-color: rgba(80, 0, 255, 0.3); 
            }
        }

        /* --- –ò–ù–¢–ï–†–§–ï–ô–° --- */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 15px; width: 100%; background: rgba(20, 20, 23, 0.95);
            border-bottom: 1px solid #333; position: fixed; top: 0; z-index: 50; height: 80px;
            backdrop-filter: blur(10px);
        }
        .header-left { display: flex; align-items: center; gap: 10px; }
        header img { width: 35px; height: 35px; cursor: pointer; transition: transform 0.2s; } 
        header img:active { transform: scale(0.9); }
        .header-title h1 { font-size: 14px; margin: 0; color: #ccc; text-transform: uppercase; letter-spacing: 1px; }
        .header-title p { font-size: 9px; color: #666; margin: 0; }
        
        .header-right { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
        
        .balance-box {
            background: #252528; padding: 5px 12px; border-radius: 12px;
            border: 1px solid #444; font-weight: bold; color: #ffd700;
            display: flex; align-items: center; gap: 5px; font-size: 14px;
        }
        .income-info { font-size: 10px; color: #00ff00; }

        /* VPN BAR */
        .vpn-container {
            width: 100px; height: 6px; background: #333; border-radius: 3px; overflow: hidden; margin-top: 2px;
            position: relative;
        }
        .vpn-bar { height: 100%; background: #00aaff; width: 0%; transition: width 0.5s; }
        .vpn-label { font-size: 9px; color: #00aaff; margin-top: 1px; }
        .vpn-warning { color: #ff3333; animation: vpn-pulse 1s infinite; }

        .spacer { height: 100px; }
        h2.main-title { font-size: 18px; margin: 20px 0 30px 0; text-align: center; font-weight: 700; letter-spacing: 1px; color: #eee; }

        /* --- –†–£–õ–ï–¢–ö–ê --- */
        .roulette-container {
            position: relative; width: 95%; max-width: 600px; height: 130px;
            background: #151517; border-radius: 20px; overflow: hidden;
            border: 2px solid #2a2a2d; margin-bottom: 30px; transition: all 0.3s;
            box-shadow: inset 0 0 30px #000;
        }
        .roulette-track { display: flex; height: 100%; align-items: center; will-change: transform; }

        .app-item {
            width: 100px; height: 100px; background: #252528; border-radius: 16px;
            margin: 0 5px; display: flex; flex-direction: column; justify-content: center;
            align-items: center; flex-shrink: 0; border: 1px solid #333; position: relative;
        }
        .app-item img { width: 50px; height: 50px; margin-bottom: 8px; border-radius: 12px; object-fit: cover; }
        .app-item span { font-size: 10px; color: #888; max-width: 90px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .center-line {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 4px; height: 100%; background: #ffd700; z-index: 10;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); opacity: 0.9; border-radius: 2px;
        }

        /* --- –ù–û–í–´–ô –¢–û–ü–û–í–´–ô –°–ö–ò–ù: NEON LIQUID (Dark VIP) --- */
        .skin-omniscience {
            /* –¢–µ–º–Ω–∞—è, –≥–ª—É–±–æ–∫–∞—è –æ—Å–Ω–æ–≤–∞ */
            background: #050505;
            border-radius: 24px;
            border: 2px solid rgba(80, 0, 255, 0.3);
            /* –ê–Ω–∏–º–∞—Ü–∏—è –¥—ã—Ö–∞–Ω–∏—è —Ä–∞–º–∫–∏ –∏ —Ç–µ–Ω–µ–π */
            animation: neon-breathe 4s ease-in-out infinite;
            overflow: hidden;
            position: relative;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –Ω–µ–æ–Ω–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞ (–§–∏–æ–ª–µ—Ç–æ–≤—ã–π/–°–∏–Ω–∏–π/–ß–µ—Ä–Ω—ã–π) */
        .skin-omniscience::before {
            content: ''; position: absolute; top: -50%; left: -50%; right: -50%; bottom: -50%;
            background: linear-gradient(125deg, 
                rgba(0,0,0,0.9) 20%, 
                rgba(80, 0, 255, 0.4) 40%, /* Purple Neon */
                rgba(0, 0, 0, 0.95) 50%,   /* Black Void */
                rgba(0, 200, 255, 0.4) 60%, /* Cyan Neon */
                rgba(0,0,0,0.9) 80%);
            background-size: 300% 300%;
            /* –ù–∞–ª–æ–∂–µ–Ω–∏–µ "Color Dodge" –∏–ª–∏ "Overlay" —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç–µ–∫–ª–∞ */
            mix-blend-mode: screen; 
            animation: neon-flow 6s ease infinite;
            pointer-events: none;
            z-index: 20;
            opacity: 0.8;
        }

        /* –°—Ç–∏–ª—å –∏–∫–æ–Ω–æ–∫ –≤–Ω—É—Ç—Ä–∏ */
        .skin-omniscience .app-item:not(.ultra) {
            background: rgba(10, 10, 20, 0.8);
            border: 1px solid rgba(100, 100, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.8);
            z-index: 21; /* –ü–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞ */
        }
        /* –ß–ë —Ñ–∏–ª—å—Ç—Ä —Å –ª–µ–≥–∫–∏–º —Å–∏–Ω–∏–º –æ—Ç—Ç–µ–Ω–∫–æ–º */
        .skin-omniscience .app-item:not(.ultra) img {
            filter: grayscale(100%) contrast(1.5) drop-shadow(0 0 5px rgba(0, 150, 255, 0.5));
        }
        .skin-omniscience .app-item:not(.ultra) span {
            color: #ccc; 
            font-family: 'Courier New', monospace; 
            font-weight: bold;
            text-transform: uppercase;
            text-shadow: 0 0 5px rgba(0, 150, 255, 0.8);
        }
        .skin-omniscience .center-line {
            background: #fff; width: 2px;
            box-shadow: 0 0 15px #fff, 0 0 30px #00f3ff; /* –ë–µ–ª—ã–π —Ü–µ–Ω—Ç—Ä —Å –≥–æ–ª—É–±—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º */
            z-index: 30;
        }


        /* --- –û–°–¢–ê–õ–¨–ù–´–ï –°–ö–ò–ù–´ (–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´) --- */
        .skin-paper { border: 4px solid #d7c9a8; background: #f5f5dc; }
        .skin-paper .app-item:not(.ultra) { background: #e8e0c5; border: 1px solid #c0b393; }
        .skin-paper .app-item:not(.ultra) span { color: #5a4a32; font-family: monospace; font-weight: bold; }
        .skin-paper .center-line { background: red; width: 2px; }

        .skin-retro { border: 4px outset #ccc; background: #008080; }
        .skin-retro .app-item:not(.ultra) { background: #c0c0c0; border: 2px outset #fff; border-radius: 0; }
        .skin-retro .app-item:not(.ultra) span { color: black; font-family: Tahoma; }
        .skin-retro .center-line { background: #000080; }

        .skin-matrix { border: 2px solid #0f0; background: #000; box-shadow: 0 0 15px #0f0; }
        .skin-matrix .app-item:not(.ultra) { background: #050505; border: 1px solid #003300; }
        .skin-matrix .app-item:not(.ultra) span { color: #0f0; font-family: monospace; }
        .skin-matrix .center-line { background: #0f0; box-shadow: 0 0 20px #0f0; }

        .skin-ussr { border: 4px solid #d32f2f; background: #2b0c0c; }
        .skin-ussr .app-item:not(.ultra) { background: #d32f2f; border: 2px solid #ffcc00; border-radius: 0; }
        .skin-ussr .app-item:not(.ultra) span { color: #ffcc00; font-weight: bold; }
        .skin-ussr .center-line { background: #ffcc00; width: 5px; }

        .skin-neon { border: 3px solid #00f3ff; box-shadow: 0 0 30px #00f3ff; background: #000; }
        .skin-neon .app-item:not(.ultra) { background: rgba(0, 243, 255, 0.05); border: 1px solid #00f3ff; }
        .skin-neon .app-item:not(.ultra) span { color: #00f3ff; }
        .skin-neon .center-line { background: #ff00ff; box-shadow: 0 0 15px #ff00ff; }

        .skin-gold { border: 3px solid #ffd700; animation: pulse-gold 2s infinite; background: #1a1a1a; }
        .skin-gold .app-item:not(.ultra) { background: linear-gradient(135deg, #333, #000); border: 1px solid #ffd700; }
        .skin-gold .app-item:not(.ultra) span { color: #ffd700; }
        .skin-gold .center-line { background: white; box-shadow: 0 0 20px white; }

        .skin-lava { border: 4px solid #ff4500; background: linear-gradient(45deg, #ff0000, #ff4500); }
        .skin-lava .app-item:not(.ultra) { background: rgba(0,0,0,0.6); border: 1px solid #ff4500; }
        .skin-lava .app-item:not(.ultra) span { color: #ffae00; font-weight: bold; }
        .skin-lava .center-line { background: #ffff00; }

        .skin-ice { border: 4px solid #a5f2f3; background: #e0f7fa; box-shadow: 0 0 20px #a5f2f3; }
        .skin-ice .app-item:not(.ultra) { background: rgba(255,255,255,0.8); border: 1px solid #00bcd4; }
        .skin-ice .app-item:not(.ultra) span { color: #006064; font-weight: bold; }
        
        .skin-glitch { border: 2px solid white; background: #111; animation: glitch 0.3s infinite; }
        .skin-glitch .app-item:not(.ultra) { background: #222; border: 1px dashed white; }
        .skin-glitch .app-item:not(.ultra) span { color: white; text-decoration: line-through; }
        
        .skin-rgb { border: 5px solid red; animation: rainbow 2s linear infinite; background: #000; }
        .skin-rgb .app-item:not(.ultra) { background: #111; border: 1px solid #333; }
        .skin-rgb .app-item:not(.ultra) span { color: white; }
        
        .skin-oil { border: 5px solid #000; background: #1c1c1c; box-shadow: inset 0 0 50px #000; }
        .skin-oil .app-item:not(.ultra) { background: linear-gradient(to bottom, #333, #000); border: 1px solid #444; }
        .skin-oil .app-item:not(.ultra) span { color: #888; }
        .skin-oil .center-line { background: #000; border: 1px solid #333; }

        .skin-space { border: 3px solid #9c27b0; background: radial-gradient(circle, #311b92 0%, #000000 100%); box-shadow: 0 0 30px #9c27b0; }
        .skin-space .app-item:not(.ultra) { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); }
        .skin-space .app-item:not(.ultra) span { color: #e1bee7; }

        .skin-illuminati { border: 3px double #33ff00; background: #001a00; }
        .skin-illuminati .app-item:not(.ultra) { background: #000; border: 1px solid #33ff00; transform: rotate(1deg); }
        .skin-illuminati .center-line { background: #33ff00; width: 1px; box-shadow: 0 0 50px #33ff00; }

        .skin-blackhole { border: none; background: #000; animation: blackhole 5s infinite; box-shadow: 0 0 50px #000; }
        .skin-blackhole .app-item:not(.ultra) { background: #000; border: 1px solid #222; border-radius: 50%; transform: scale(0.9); }
        .skin-blackhole .app-item:not(.ultra) span { color: #444; font-size: 8px; }
        .skin-blackhole .center-line { background: white; width: 1px; }

        .skin-multiverse { border: 5px dashed #ff00ff; background: url('https://media.giphy.com/media/26tOZ42Mg6pbTUPvy/giphy.gif'); background-size: cover; }
        .skin-multiverse .app-item:not(.ultra) { background: rgba(255,255,255,0.2); border: 2px solid white; backdrop-filter: blur(5px); }
        .skin-multiverse .app-item:not(.ultra) span { color: white; text-shadow: 2px 2px 0 #000; }

        .skin-timelord { border: 5px double #c0a062; background: #161005; box-shadow: inset 0 0 100px #524220; }
        .skin-timelord .app-item:not(.ultra) { border: 1px solid #c0a062; background: transparent; transform: skewX(-10deg); }
        .skin-timelord .app-item:not(.ultra) span { color: #c0a062; letter-spacing: 2px; }

        .skin-admin { border: 5px solid white; background: #fff; box-shadow: 0 0 100px white; }
        .skin-admin .app-item:not(.ultra) { background: white; border: 2px solid #ddd; }
        .skin-admin .app-item:not(.ultra) span { color: #000; font-weight: 900; }
        .skin-admin .center-line { background: #000; width: 5px; }

        /* The End (–°—Ç–∞—Ä—ã–π VIP) */
        .skin-the-end { border: 10px solid #ff0000; background: #000; animation: shake-hard 0.2s infinite; box-shadow: 0 0 100px red; }
        .skin-the-end .app-item:not(.ultra) { background: #200000; border: 2px solid red; filter: contrast(200%) grayscale(100%); }
        .skin-the-end .app-item:not(.ultra) img { filter: invert(1); }
        .skin-the-end .app-item:not(.ultra) span { color: red; font-family: 'Courier New'; text-transform: uppercase; }
        .skin-the-end .center-line { background: red; width: 10px; box-shadow: 0 0 50px red; }

        /* –û–±—ã—á–Ω—ã–π –£–ª—å—Ç—Ä–∞–±–∞–Ω */
        .app-item.ultra { animation: rgb-bg-flash 2s linear infinite, ultra-pulse 0.5s ease-in-out infinite alternate; border: 3px solid white; z-index: 5; }
        .app-item.ultra img { animation: hue-spin 1s linear infinite; filter: contrast(150%); }
        .app-item.ultra span { color: black; font-weight: 900; background: white; padding: 2px 5px; border-radius: 4px; }

        /* --- UI –≠–õ–ï–ú–ï–ù–¢–´ --- */
        .controls { display: flex; gap: 10px; width: 95%; max-width: 400px; justify-content: center; }
        
        .btn {
            border: none; padding: 15px 0; font-size: 16px; font-weight: 800; border-radius: 12px;
            cursor: pointer; text-transform: uppercase; transition: transform 0.1s; flex: 1;
            display: flex; justify-content: center; align-items: center; color: white;
        }
        .btn:active { transform: scale(0.96); }

        .spin-btn { background: #333; color: #666; font-size: 18px; }
        .spin-btn.active { background: #ffd700; color: #111; box-shadow: 0 0 25px rgba(255, 215, 0, 0.2); }
        .shop-btn { background: #4285f4; box-shadow: 0 0 20px rgba(66, 133, 244, 0.2); }

        /* –≠–§–§–ï–ö–¢–´ */
        .effects-container { width: 95%; max-width: 400px; margin-top: 15px; display: flex; flex-direction: column; gap: 5px; }
        .effect-badge {
            font-size: 12px; font-weight: bold; padding: 8px 12px; border-radius: 8px;
            display: flex; justify-content: space-between; align-items: center;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.5);
        }
        .eff-green { background: rgba(0, 100, 0, 0.6); border: 1px solid #00ff00; color: #00ff00; }
        .eff-red { background: rgba(100, 0, 0, 0.6); border: 1px solid #ff0000; color: #ff0000; }

        /* –ú–û–î–ê–õ–ö–ò */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); display: none;
            justify-content: center; align-items: center; z-index: 100; backdrop-filter: blur(8px);
        }

        .modal-card {
            background: #1e1e20; padding: 25px; border-radius: 24px; text-align: center;
            width: 90%; max-width: 360px; border: 1px solid #333; animation: popIn 0.3s ease;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
        }
        @keyframes popIn { from{transform:scale(0.8);opacity:0} to{transform:scale(1);opacity:1} }

        .app-preview img { width: 90px; height: 90px; border-radius: 20px; margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .app-preview h3 { font-size: 24px; margin: 0 0 20px 0; }
        
        .action-btn { width: 100%; padding: 14px; margin-bottom: 10px; border: none; border-radius: 12px; font-weight: bold; color: white; cursor: pointer; font-size: 14px; text-transform: uppercase; }
        .btn-restrict { background: #e67e22; }
        .btn-slow { background: #9da631; }
        .btn-ban { background: #c0392b; }

        .take-btn { background: #ffd700; width: 100%; padding: 14px; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; font-size: 16px; color: #111; margin-bottom: 10px; text-transform: uppercase; }

        /* –ö–Ω–æ–ø–∫–∞ –≤–∑—è—Ç–∫–∏ */
        .bribe-btn { background: #ff0000; color: white; animation: pulse 0.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* –ú–ê–ì–ê–ó–ò–ù UI */
        .shop-tabs { display: flex; gap: 5px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { flex: 1; padding: 8px 5px; background: #2a2a2d; border: 1px solid #444; border-radius: 8px; color: #888; cursor: pointer; font-weight: bold; font-size: 12px; min-width: 80px; }
        .tab-btn.active { background: #ffd700; color: black; border-color: #ffd700; }
        
        .shop-content { display: none; }
        .shop-content.active { display: flex; flex-direction: column; gap: 8px; max-height: 55vh; overflow-y: auto; text-align: left; }

        .shop-item { 
            background: #252528; padding: 12px; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center; border: 1px solid #333; 
        }
        .shop-item-info { display: flex; flex-direction: column; gap: 3px; width: 60%; }
        .item-mult { color: #00e676; font-size: 11px; font-weight: bold; }
        .buy-btn { background: #28a745; color: white; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 12px; min-width: 75px; }
        .buy-btn.equipped { background: #ffd700; color: black; cursor: default; }
        .buy-btn.maxed { background: #555; cursor: default; }
        .old-price { text-decoration: line-through; color: #666; font-size: 10px; margin-right: 5px; }

        /* Prestige */
        .prestige-btn { width: 100%; background: linear-gradient(45deg, #800080, #4b0082); color: white; padding: 15px; border-radius: 12px; font-weight: bold; border: 1px solid #a020f0; margin-bottom: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <div class="header-left">
            <img id="headerLogo" src="logo.png" alt="RKN" onclick="handleLogoClick()">
            <div class="header-title">
                <h1>–†–û–°–ö–û–ú–ù–ê–î–ó–û–†</h1>
                <p>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
            </div>
        </div>
        <div class="header-right">
            <div class="balance-box">
                <span id="balanceDisplay">0</span> ‚ÇΩ
            </div>
            <div class="income-info" id="passiveDisplay">+0 ‚ÇΩ/—Å–µ–∫</div>
            <div class="vpn-container">
                <div id="vpnBar" class="vpn-bar"></div>
            </div>
            <div id="vpnLabel" class="vpn-label">VPN: 0%</div>
        </div>
    </header>

    <div class="spacer"></div>
    <h2 class="main-title">–ß–¢–û –ó–ê–ü–†–ï–¢–ò–ú –°–ï–ì–û–î–ù–Ø?</h2>

    <div class="roulette-container" id="rouletteBox">
        <div class="center-line"></div>
        <div class="roulette-track" id="track"></div>
    </div>

    <div class="controls">
        <button class="btn shop-btn" onclick="openShop()">üõí –ì–æ—Å–∑–∞–∫—É–ø–∫–∏</button>
        <button id="spinBtn" class="btn spin-btn active" onclick="spinRoulette()">–ö–†–£–¢–ò–¢–¨</button>
    </div>
    
    <div id="effectsContainer" class="effects-container"></div>

    <div class="modal-overlay" id="actionModal">
        <div class="modal-card">
            <div class="app-preview">
                <img id="selectedAppImg" src="" alt="">
                <h3 id="selectedAppName">App</h3>
            </div>
            <button class="action-btn btn-restrict" onclick="chooseAction('–û–ì–†–ê–ù–ò–ß–ï–ù–û')">–û–ì–†–ê–ù–ò–ß–ò–¢–¨</button>
            <button class="action-btn btn-slow" onclick="chooseAction('–ó–ê–ú–ï–î–õ–ò–¢–¨')">–ó–ê–ú–ï–î–õ–ò–¢–¨</button>
            <button class="action-btn btn-ban" onclick="chooseAction('–ó–ê–ë–ê–ù–ò–¢–¨')">–ó–ê–ë–ê–ù–ò–¢–¨</button>
        </div>
    </div>

    <div class="modal-overlay" id="rewardModal">
        <div class="modal-card" style="background: linear-gradient(135deg, #a32222, #7f1a1a); border: 1px solid #ff5252;">
            <div id="resultStamp" style="border: 3px solid white; display: inline-block; padding: 5px 15px; font-weight: bold; font-size: 20px; transform: rotate(-5deg); margin-bottom: 20px; background: #d32f2f;">–ó–ê–ë–ê–ù–ï–ù–û</div>
            <p style="font-size: 12px; color: #ddd; margin: 0;">–ë—é–¥–∂–µ—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞</p>
            <h2 id="moneyText" style="font-size: 32px; margin: 10px 0 25px 0;">0 ‚ÇΩ</h2>
            <button class="take-btn" onclick="collectMoney()">–í –±—é–¥–∂–µ—Ç</button>
        </div>
    </div>

    <div class="modal-overlay" id="offlineModal">
        <div class="modal-card" style="border: 1px solid #ffd700; background: #151517;">
            <h3 style="color: #ffd700; text-transform: uppercase;">–û–¢–ß–Å–¢ –û –ë–õ–û–ö–ò–†–û–í–ö–ê–•</h3>
            <p style="color: #aaa; font-size: 13px;">–ü–æ–∫–∞ –≤–∞—Å –Ω–µ –±—ã–ª–æ, –º—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –≤—Å—ë –ø–æ–¥—Ä—è–¥!</p>
            <h2 id="offlineMoneyText" style="font-size: 36px; color: #fff; margin: 20px 0;">0 ‚ÇΩ</h2>
            <button class="take-btn" onclick="document.getElementById('offlineModal').style.display='none'">–û—Ç–ª–∏—á–Ω–æ</button>
        </div>
    </div>

    <div class="modal-overlay" id="eventModal">
        <div class="modal-card" style="border: 2px solid red;">
            <h3 id="eventTitle" style="color: red; text-transform: uppercase;">–¢–†–ï–í–û–ì–ê</h3>
            <p id="eventDesc" style="color: #ddd;">–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</p>
            <div id="eventTimer" style="font-size: 20px; font-weight: bold; margin: 10px 0; color: orange;">10</div>
            <button id="eventBtn" class="take-btn bribe-btn" onclick="resolveEvent()">–î–µ–π—Å—Ç–≤–∏–µ</button>
        </div>
    </div>

    <div class="modal-overlay" id="shopModal">
        <div class="modal-card" style="max-width: 420px; height: 80vh; justify-content: flex-start; padding: 20px;">
            <div style="display:flex; justify-content:space-between; align-items:center; width:100%; margin-bottom:15px;">
                <h2 style="margin:0; font-size:20px;">–ì–æ—Å–∑–∞–∫—É–ø–∫–∏</h2>
                <div style="font-size:12px; color:#a020f0;">–ö–æ—Ä—Ä—É–ø—Ü–∏—è: <span id="corruptionDisplay">0</span></div>
            </div>
            
            <div class="shop-tabs">
                <button class="tab-btn active" onclick="switchTab('skins')">–°–∫–∏–Ω—ã</button>
                <button class="tab-btn" onclick="switchTab('afk')">–ê–§–ö</button>
                <button class="tab-btn" onclick="switchTab('tech')">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</button>
                <button class="tab-btn" onclick="switchTab('sec')">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</button>
            </div>

            <div id="shopSkins" class="shop-content active"></div>
            <div id="shopAFK" class="shop-content"></div>
            <div id="shopTech" class="shop-content"></div>
            <div id="shopSec" class="shop-content"></div>

            <div id="prestigeSection" style="margin-top: auto; width: 100%; padding-top: 10px;">
                <button class="prestige-btn" onclick="doPrestige()">–£–ô–¢–ò –í –û–¢–°–¢–ê–í–ö–£ (–°–±—Ä–æ—Å)<br><span style="font-size:10px; font-weight:normal;">–¢—Ä–µ–±—É–µ—Ç—Å—è: 1 –¢—Ä–ª–Ω ‚ÇΩ</span></button>
                <button class="btn" style="background: #333; color: #aaa; width: 100%; padding: 12px;" onclick="closeShop()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // –î–ê–ù–ù–´–ï
        const apps = [
            { name: "CapCut", img: "capcut.png" }, { name: "ChatGPT", img: "chatgpt.png" }, { name: "WhatsApp", img: "whatsapp.png" },
            { name: "X (Twitter)", img: "x.png" }, { name: "Zoom", img: "zoom.png" }, { name: "Teams", img: "teams.png" },
            { name: "TikTok", img: "tiktok.png" }, { name: "YouTube", img: "youtube.png" }, { name: "Discord", img: "discord.png" },
            { name: "Telegram", img: "telegram.png" }, { name: "Instagram", img: "instagram.png" }, { name: "Facebook", img: "facebook.png" },
            { name: "Twitch", img: "twitch.png" }, { name: "Spotify", img: "spotify.png" }, { name: "Netflix", img: "netflix.png" },
            { name: "Steam", img: "steam.png" }, { name: "Roblox", img: "roblox.png" }, { name: "Pinterest", img: "pinterest.png" },
            { name: "Reddit", img: "reddit.png" }, { name: "Snapchat", img: "snapchat.png" }, { name: "LinkedIn", img: "linkedin.png" },
            { name: "GitHub", img: "github.png" }, { name: "Wikipedia", img: "wikipedia.png" }, { name: "Google", img: "google.png" },
            { name: "Amazon", img: "amazon.png" }, { name: "Viber", img: "viber.png" }, { name: "Signal", img: "signal.png" },
            { name: "Skype", img: "skype.png" }, { name: "SoundCloud", img: "soundcloud.png" }, { name: "Minecraft", img: "minecraft.png" },
            { name: "Brawl Stars", img: "brawlstars.png" }, { name: "Likee", img: "likee.png" }
        ];

        const rknAudio = new Audio('RKN.mp3'); rknAudio.loop = true; 

        // –¢–û–í–ê–†–´
        const skinItems = [
            { id: 'default', name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', price: 0, mult: 1, desc: '–û–±—ã—á–Ω—ã–π –≤–∏–¥' },
            { id: 'paper', name: '–ë—é—Ä–æ–∫—Ä–∞—Ç–∏—è', price: 50000, mult: 1.2, desc: '–ó–∞–≤–∞–ª–µ–Ω–æ –±—É–º–∞–≥–∞–º–∏', class: 'skin-paper' },
            { id: 'retro', name: 'Windows 95', price: 150000, mult: 1.5, desc: '–°—Ç–∞—Ä–∞—è —à–∫–æ–ª–∞', class: 'skin-retro' },
            { id: 'dark', name: '–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º', price: 250000, mult: 1.8, desc: '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞', class: 'skin-oil' }, 
            { id: 'ice', name: '–õ–µ–¥–Ω–∏–∫–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥', price: 500000, mult: 2.5, desc: '–ü–æ–ª–Ω–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞', class: 'skin-ice' },
            { id: 'matrix', name: '–•–∞–∫–µ—Ä', price: 800000, mult: 3.0, desc: '–¢—ã –≤ —Å–∏—Å—Ç–µ–º–µ', class: 'skin-matrix' },
            { id: 'ussr', name: '–°–æ–≤–µ—Ç—Å–∫–∞—è –≤–ª–∞—Å—Ç—å', price: 1000000, mult: 3.5, desc: '–ñ–µ–ª–µ–∑–Ω—ã–π –∑–∞–Ω–∞–≤–µ—Å', class: 'skin-ussr' },
            { id: 'neon', name: 'Cyber RKN', price: 2000000, mult: 5.0, desc: '–ë—É–¥—É—â–µ–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ', class: 'skin-neon' },
            { id: 'gold', name: 'Luxury Gold', price: 5000000, mult: 8.0, desc: '–ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ –∑–æ–ª–æ—Ç–æ', class: 'skin-gold' },
            { id: 'glitch', name: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ–π', price: 10000000, mult: 10.0, desc: '–°–∏—Å—Ç–µ–º–∞ —Å–ª–æ–º–∞–Ω–∞', class: 'skin-glitch' },
            { id: 'lava', name: '–ê–¥—Å–∫–∏–π –æ–≥–æ–Ω—å', price: 25000000, mult: 15.0, desc: '–°–∂–∏–≥–∞–µ—Ç –±—é–¥–∂–µ—Ç', class: 'skin-lava' },
            { id: 'rgb', name: 'RGB –ì–µ–π–º–µ—Ä', price: 50000000, mult: 20.0, desc: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π FPS', class: 'skin-rgb' },
            { id: 'oil', name: '–ù–µ—Ñ—Ç—è–Ω–æ–π –º–∞–≥–Ω–∞—Ç', price: 100000000, mult: 25.0, desc: '–ß–µ—Ä–Ω–æ–µ –∑–æ–ª–æ—Ç–æ', class: 'skin-oil' },
            { id: 'space', name: '–ì–∞–ª–∞–∫—Ç–∏–∫–∞', price: 500000000, mult: 35.0, desc: '–ë–ª–æ–∫–∏—Ä—É–µ–º –ø–ª–∞–Ω–µ—Ç—ã', class: 'skin-space' },
            { id: 'illuminati', name: '–¢–∞–π–Ω–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ', price: 1000000000, mult: 50.0, desc: '–í—Å–µ–≤–∏–¥—è—â–µ–µ –æ–∫–æ', class: 'skin-illuminati' },
            { id: 'blackhole', name: '–ß–µ—Ä–Ω–∞—è –î—ã—Ä–∞', price: 100000000000, mult: 100.0, desc: '–ü–æ–≥–ª–æ—â–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫', class: 'skin-blackhole' },
            { id: 'multiverse', name: '–ú—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–∞—è', price: 500000000000, mult: 250.0, desc: '–ë–∞–Ω –≤ 5 –∏–∑–º–µ—Ä–µ–Ω–∏—è—Ö', class: 'skin-multiverse' },
            { id: 'timelord', name: '–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –í—Ä–µ–º–µ–Ω–∏', price: 5000000000000, mult: 500.0, desc: '–ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏', class: 'skin-timelord' },
            { id: 'admin', name: '–ê–¥–º–∏–Ω –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏', price: 20000000000000, mult: 1000.0, desc: '–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ–ª–µ–Ω–Ω–æ–π', class: 'skin-admin' },
            { id: 'the_end', name: '–í–õ–ê–°–¢–ï–õ–ò–ù –ò–ù–¢–ï–†–ù–ï–¢–ê', price: 100000000000000, mult: 9999.0, desc: '‚ô´ –ú–£–ó–´–ö–ê–õ–¨–ù–´–ô –°–ö–ò–ù ‚ô´', class: 'skin-the-end' },
            { id: 'omniscience', name: '–ö–†–ò–°–¢–ê–õ–õ –í–°–ï–í–ï–î–ï–ù–ò–Ø', price: 500000000000000, mult: 50000.0, desc: 'VIP: Dark Neon Liquid', class: 'skin-omniscience' }
        ];

        const afkItems = [
            { id: 'intern', name: '–°—Ç–∞–∂—ë—Ä', price: 5000, income: 100, desc: '–ö–ª–∏–∫–∞–µ—Ç –∑–∞ –≤–∞—Å' },
            { id: 'printer', name: '–ü—Ä–∏–Ω—Ç–µ—Ä –∑–∞–∫–æ–Ω–æ–≤', price: 25000, income: 500, desc: '–ü–µ—á–∞—Ç–∞–µ—Ç –∑–∞–ø—Ä–µ—Ç—ã' },
            { id: 'script', name: '–°–∫—Ä–∏–ø—Ç –Ω–∞ Python', price: 100000, income: 2500, desc: '–ê–≤—Ç–æ-–±–∞–Ω' },
            { id: 'botfarm', name: '–ë–æ—Ç–æ—Ñ–µ—Ä–º–∞', price: 500000, income: 15000, desc: '–ñ–∞–ª–æ–±—ã 24/7' },
            { id: 'server', name: '–°–µ—Ä–≤–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫', price: 2500000, income: 80000, desc: '–ñ–µ–ª–µ–∑–æ –Ω–µ —Å–ø–∏—Ç' },
            { id: 'ai', name: '–ò–ò –¶–µ–Ω–∑–æ—Ä', price: 10000000, income: 350000, desc: '–ù–µ–π—Ä–æ—Å–µ—Ç—å' },
            { id: 'satellite', name: '–°–ø—É—Ç–Ω–∏–∫-–ì–ª—É—à–∏–ª–∫–∞', price: 50000000, income: 2000000, desc: '–õ–æ–º–∞–µ—Ç GPS' },
            { id: 'dpi', name: '–°–∏—Å—Ç–µ–º–∞ DPI', price: 250000000, income: 10000000, desc: '–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å' },
            { id: 'firewall', name: '–í–µ–ª–∏–∫–∏–π –§–∞–π—Ä–≤–æ–ª', price: 1000000000, income: 50000000, desc: '–ò–∑–æ–ª—è—Ü–∏—è' },
            { id: 'switch', name: '–†–£–ë–ò–õ–¨–ù–ò–ö', price: 50000000000, income: 1000000000, desc: 'OFFLINE' }
        ];

        const techItems = [
            { id: 'coffee', name: '–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞', price: 50000, desc: '–°—Ç–∞–∂—ë—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç x2 –±—ã—Å—Ç—Ä–µ–µ', target: 'intern', mult: 2 },
            { id: 'china', name: '–ö–∏—Ç–∞–π—Å–∫–∏–µ —á–∏–ø—ã', price: 5000000, desc: '–°–µ—Ä–≤–µ—Ä–∞ –Ω–∞ 20% –¥–µ—à–µ–≤–ª–µ', type: 'discount', target: 'server', val: 0.8 },
            { id: 'yarovaya', name: '–ó–∞–∫–æ–Ω –Ø—Ä–æ–≤–æ–π', price: 2000000000, desc: '–§–∞–π—Ä–≤–æ–ª –ø—Ä–∏–Ω–æ—Å–∏—Ç x3 –¥–æ—Ö–æ–¥–∞', target: 'firewall', mult: 3 }
        ];

        const secItems = [
            { id: 'propaganda', name: '–ü—Ä–æ–ø–∞–≥–∞–Ω–¥–∞', price: 100000, desc: '–°–Ω–∏–∂–∞–µ—Ç VPN –Ω–∞ 10%', action: 'reduce_vpn', val: 10 },
            { id: 'dudus', name: 'DDOS –ê—Ç–∞–∫–∞', price: 1000000, desc: '–°–Ω–∏–∂–∞–µ—Ç VPN –Ω–∞ 50%', action: 'reduce_vpn', val: 50 },
            { id: 'repair', name: '–†–µ–º–∫–æ–º–ø–ª–µ–∫—Ç', price: 500000, desc: '–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø–æ—á–∏–Ω–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤', action: 'fix_server' }
        ];

        const promoCodes = {
            "RKNPIDORI": { type: "boost", duration: 15*60, val: 0.3, msg: "–£–õ–¨–¢–†–ê–ë–ê–ù 30% (15 –º–∏–Ω)" },
            "GOSDUMA": { type: "money", val: 50000000, msg: "–ì—Ä–∞–Ω—Ç –æ—Ç –ì–æ—Å–¥—É–º—ã: +50,000,000 ‚ÇΩ" },
            "X2": { type: "multiply_balance", val: 2, msg: "–£–¥–≤–æ–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±—é–¥–∂–µ—Ç–∞!" },
            "TOTALBLOCK": { type: "next_spin_ultra", val: true, msg: "–°–ª–µ–¥—É—é—â–∏–π —Å–ø–∏–Ω - 100% –£–õ–¨–¢–†–ê–ë–ê–ù!" },
            "CORRUPTION": { type: "shop_discount", val: 0.5, duration: 10*60, msg: "–°–∫–∏–¥–∫–∞ 50% –≤ –º–∞–≥–∞–∑–∏–Ω–µ (10 –º–∏–Ω)" },
            "MINING": { type: "global_mult", val: 5, duration: 5*60, msg: "–ú–∞–π–Ω–∏–Ω–≥: –î–æ—Ö–æ–¥ x5 (5 –º–∏–Ω)" },
            "FREENEON": { type: "unlock_skin", val: "neon", msg: "–°–∫–∏–Ω Cyber RKN –ø–æ–ª—É—á–µ–Ω!" },
            "FLASH": { type: "speed_spin", duration: 3*60, msg: "–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Å–ø–∏–Ω—ã (3 –º–∏–Ω)" },
            "POOR": { type: "reset_money", msg: "–ë–∞–ª–∞–Ω—Å —Å–±—Ä–æ—à–µ–Ω... –ó–∞—Ç–æ —á–µ—Å—Ç–Ω–æ." },
            "SECRET": { type: "random_money", msg: "–°–µ–∫—Ä–µ—Ç–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!" }
        };

        // --- –°–û–°–¢–û–Ø–ù–ò–ï ---
        let balance = parseInt(localStorage.getItem('rkn_balance')) || 0;
        let corruption = parseInt(localStorage.getItem('rkn_corruption')) || 0;
        let inventory = JSON.parse(localStorage.getItem('rkn_inventory')) || ['default'];
        let afkInventory = JSON.parse(localStorage.getItem('rkn_afk')) || {};
        let techInventory = JSON.parse(localStorage.getItem('rkn_tech')) || [];
        let usedCodes = JSON.parse(localStorage.getItem('rkn_used_codes')) || [];
        let currentSkinId = localStorage.getItem('rkn_skin') || 'default';
        let activeEffects = JSON.parse(localStorage.getItem('rkn_active_effects')) || {};
        
        let vpnLevel = 0; // 0-100
        let isServerBroken = false;
        let currentEvent = null;
        let eventTimerVal = 0;
        let eventInterval;

        let currentWinAmount = 0;
        let logoClicks = 0;
        let clickResetTimer;
        let uiUpdateInterval;
        let forceUltra = false; 

        const CARD_WIDTH = 100; const MARGIN_SIDE = 5; const SLOT_WIDTH = CARD_WIDTH + (MARGIN_SIDE * 2);
        const track = document.getElementById('track');
        let isSpinning = false;
        let rouletteList = [];

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
        function init() {
            checkOfflineEarnings();
            updateBalanceUI();
            applySkin(currentSkinId);
            startEffectsLoop();
            startPassiveIncomeLoop();
            startVPNLogic();
            startRandomEvents();

            if(currentSkinId === 'the_end') { rknAudio.play().catch(e => console.log("")); }
            generateRoulette();
        }

        function generateRoulette() {
            track.innerHTML = '';
            rouletteList = [];
            const boostEndTime = activeEffects['RKNPIDORI'] || 0;
            const ultraChance = (boostEndTime > Date.now()) ? 0.3 : 0.005;

            for(let i=0; i<50; i++) {
                let batch = [...apps];
                batch.sort(() => Math.random() - 0.5);
                batch = batch.map(app => {
                    if(Math.random() < ultraChance) return { name: "–£–õ–¨–¢–†–ê–ë–ê–ù", img: "logo.png", isUltra: true };
                    return app;
                });
                rouletteList = rouletteList.concat(batch);
            }
            rouletteList.forEach(app => {
                const div = document.createElement('div');
                div.className = 'app-item' + (app.isUltra ? ' ultra' : '');
                div.innerHTML = `<img src="${app.img}"><span>${app.name}</span>`;
                track.appendChild(div);
            });
        }

        // --- –≠–ö–û–ù–û–ú–ò–ö–ê –ò –ú–ï–•–ê–ù–ò–ö–ò ---
        function getPassiveIncome() {
            if(isServerBroken) return 0;
            let total = 0;
            
            for(const [id, count] of Object.entries(afkInventory)) {
                const item = afkItems.find(i => i.id === id);
                if(item) {
                    let itemIncome = item.income;
                    // –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
                    if(id === 'intern' && techInventory.includes('coffee')) itemIncome *= 2;
                    if(id === 'firewall' && techInventory.includes('yarovaya')) itemIncome *= 3;
                    total += itemIncome * count;
                }
            }
            
            // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
            const globalMult = getGlobalMultiplier();
            const corruptionMult = 1 + (corruption * 0.1); // +10% –∑–∞ –æ—á–∫–æ –∫–æ—Ä—Ä—É–ø—Ü–∏–∏
            
            // –®—Ç—Ä–∞—Ñ VPN
            const vpnPenalty = 1 - (vpnLevel * 0.009); // –ú–∞–∫—Å -90% –ø—Ä–∏ 100 VPN
            let finalIncome = total * globalMult * corruptionMult * (vpnPenalty > 0.1 ? vpnPenalty : 0.1);
            
            return Math.floor(finalIncome);
        }

        function startPassiveIncomeLoop() {
            setInterval(() => {
                const income = getPassiveIncome();
                if(income > 0) {
                    balance += income;
                    saveGame();
                }
                updateBalanceUI();
            }, 1000);
        }

        function startVPNLogic() {
            setInterval(() => {
                if(vpnLevel < 100) vpnLevel += 0.5; // –†–∞—Å—Ç–µ—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
                updateVPNUI();
            }, 2000);
        }

        function updateVPNUI() {
            const bar = document.getElementById('vpnBar');
            const label = document.getElementById('vpnLabel');
            bar.style.width = vpnLevel + '%';
            label.innerText = `VPN: ${Math.floor(vpnLevel)}%`;
            if(vpnLevel > 80) label.classList.add('vpn-warning');
            else label.classList.remove('vpn-warning');
        }

        function startRandomEvents() {
            setInterval(() => {
                if(currentEvent || isServerBroken) return;
                const rand = Math.random();
                if(rand < 0.05) triggerEvent('audit'); // 5% —à–∞–Ω—Å –ø—Ä–æ–≤–µ—Ä–∫–∏
                else if (rand < 0.03 && Object.keys(afkInventory).length > 0) triggerEvent('crash'); // 3% —à–∞–Ω—Å –ø–æ–ª–æ–º–∫–∏
            }, 60000); // –†–∞–∑ –≤ –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∞
        }

        function triggerEvent(type) {
            const modal = document.getElementById('eventModal');
            const title = document.getElementById('eventTitle');
            const desc = document.getElementById('eventDesc');
            const btn = document.getElementById('eventBtn');
            const timer = document.getElementById('eventTimer');
            
            modal.style.display = 'flex';
            currentEvent = type;
            eventTimerVal = 10;
            timer.innerText = eventTimerVal;

            if(type === 'audit') {
                title.innerText = "–ù–ê–õ–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê";
                const bribe = Math.floor(balance * 0.2);
                desc.innerText = `–°—á–µ—Ç–Ω–∞—è –ø–∞–ª–∞—Ç–∞ –Ω–∞—à–ª–∞ –Ω–µ–¥–æ—Å—Ç–∞—á—É! –î–∞—Ç—å –≤–∑—è—Ç–∫—É ${bribe.toLocaleString()} ‚ÇΩ?`;
                btn.innerText = "–î–ê–¢–¨ –í–ó–Ø–¢–ö–£";
                btn.onclick = () => {
                    if(balance >= bribe) {
                        balance -= bribe;
                        alert("–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä —É—à–µ–ª –¥–æ–≤–æ–ª—å–Ω—ã–π.");
                        closeEvent();
                    } else alert("–î–µ–Ω–µ–≥ –Ω–µ—Ç!");
                };
            } else if (type === 'crash') {
                title.innerText = "–°–ï–†–í–ï–†–ê –ü–ï–†–ï–ì–†–ï–õ–ò–°–¨";
                desc.innerText = "–î–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä –≥–æ—Ä–∏—Ç! –î–æ—Ö–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –í—ã–∑–æ–≤–∏—Ç–µ –ø–æ–∂–∞—Ä–Ω—ã—Ö!";
                btn.innerText = "–í–´–ó–í–ê–¢–¨ (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)";
                isServerBroken = true;
                btn.onclick = () => {
                    alert("–ü–æ–∂–∞—Ä –ø–æ—Ç—É—à–µ–Ω.");
                    isServerBroken = false;
                    closeEvent();
                };
            }

            eventInterval = setInterval(() => {
                eventTimerVal--;
                timer.innerText = eventTimerVal;
                if(eventTimerVal <= 0) {
                    if(type === 'audit') {
                        balance = Math.floor(balance / 2);
                        alert("–í—Ä–µ–º—è –≤—ã—à–ª–æ! –ö–æ–Ω—Ñ–∏—Å–∫–æ–≤–∞–Ω–æ 50% –±–∞–ª–∞–Ω—Å–∞.");
                    }
                    if(type === 'crash') {
                        // –ï—Å–ª–∏ –ø–æ–∂–∞—Ä –Ω–µ –ø–æ—Ç—É—à–∏–ª–∏, –æ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –∫—É–ø—è—Ç —Ä–µ–º–∫–æ–º–ø–ª–µ–∫—Ç
                        // –∏–ª–∏ –Ω–µ –Ω–∞–∂–º—É—Ç –∫–Ω–æ–ø–∫—É –ø–æ—Ç–æ–º (–Ω–æ –æ–∫–Ω–æ –∑–∞–∫—Ä–æ–µ—Ç—Å—è)
                    }
                    closeEvent();
                }
            }, 1000);
        }

        function closeEvent() {
            clearInterval(eventInterval);
            document.getElementById('eventModal').style.display = 'none';
            currentEvent = null;
        }

        function resolveEvent() { /* –õ–æ–≥–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ triggerEvent */ }

        // --- PRESTIGE ---
        function doPrestige() {
            if(balance < 1000000000000) { alert("–ù—É–∂–Ω–æ –Ω–∞–∫–æ–ø–∏—Ç 1 –¢—Ä–∏–ª–ª–∏–æ–Ω!"); return; }
            if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—Å–∏—Ç—Å—è (–≤–∫–ª—é—á–∞—è –í–°–ï –ö–£–ü–õ–ï–ù–ù–´–ï –°–ö–ò–ù–´), –Ω–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –û—á–∫–∏ –ö–æ—Ä—Ä—É–ø—Ü–∏–∏.")) {
                corruption += 10; // +10 –æ—á–∫–æ–≤
                balance = 0;
                afkInventory = {};
                techInventory = [];
                // –ü–û–õ–ù–´–ô –°–ë–†–û–° –ò–ù–í–ï–ù–¢–ê–†–Ø –ò –°–ö–ò–ù–ê
                inventory = ['default'];
                currentSkinId = 'default';
                localStorage.setItem('rkn_skin', 'default');
                
                saveGame();
                location.reload();
            }
        }

        function checkOfflineEarnings() {
            const lastTime = parseInt(localStorage.getItem('rkn_last_time'));
            if(lastTime) {
                const now = Date.now();
                const diffSec = Math.floor((now - lastTime) / 1000);
                if(diffSec > 10) {
                    // –ü—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω–∞ –±–µ–∑ VPN —à—Ç—Ä–∞—Ñ–∞
                    let offlineRate = 0;
                    for(const [id, count] of Object.entries(afkInventory)) {
                        const item = afkItems.find(i => i.id === id);
                        if(item) offlineRate += item.income * count;
                    }
                    const earned = diffSec * offlineRate;
                    if(earned > 0) {
                        balance += earned;
                        document.getElementById('offlineMoneyText').innerText = earned.toLocaleString() + ' ‚ÇΩ';
                        document.getElementById('offlineModal').style.display = 'flex';
                    }
                }
            }
            saveGame();
        }

        function saveGame() {
            localStorage.setItem('rkn_balance', balance);
            localStorage.setItem('rkn_corruption', corruption);
            localStorage.setItem('rkn_inventory', JSON.stringify(inventory));
            localStorage.setItem('rkn_afk', JSON.stringify(afkInventory));
            localStorage.setItem('rkn_tech', JSON.stringify(techInventory));
            localStorage.setItem('rkn_skin', currentSkinId);
            localStorage.setItem('rkn_last_time', Date.now());
        }

        // --- UI ---
        function updateBalanceUI() {
            document.getElementById('balanceDisplay').innerText = Math.floor(balance).toLocaleString();
            document.getElementById('passiveDisplay').innerText = '+' + getPassiveIncome().toLocaleString() + ' ‚ÇΩ/—Å–µ–∫';
            document.getElementById('corruptionDisplay').innerText = corruption;
        }

        // --- –ü–†–û–ú–û–ö–û–î–´ ---
        function handleLogoClick() {
            logoClicks++;
            clearTimeout(clickResetTimer);
            clickResetTimer = setTimeout(() => { logoClicks = 0; }, 1000);
            if(logoClicks >= 10) { logoClicks = 0; askForCode(); }
        }

        function askForCode() {
            const code = prompt("–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥:");
            if(!code) return;
            const upperCode = code.toUpperCase().trim();
            if(usedCodes.includes(upperCode)) { alert("–ö–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!"); return; }
            if(promoCodes[upperCode]) activateCode(upperCode, promoCodes[upperCode]);
            else alert("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!");
        }

        function activateCode(codeStr, data) {
            usedCodes.push(codeStr);
            localStorage.setItem('rkn_used_codes', JSON.stringify(usedCodes));
            alert(data.msg);

            if(data.type === 'money') balance += data.val;
            else if (data.type === 'multiply_balance') balance *= data.val;
            else if (data.type === 'reset_money') balance = 0;
            else if (data.type === 'random_money') balance += Math.floor(Math.random() * 100000000) + 1;
            else if (data.type === 'unlock_skin') {
                if(!inventory.includes(data.val)) inventory.push(data.val);
                else { balance += 1000000; alert("–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: 1,000,000 ‚ÇΩ"); }
            } else if (data.type === 'next_spin_ultra') forceUltra = true;
            else if (data.duration) {
                activeEffects[codeStr] = Date.now() + (data.duration * 1000);
                localStorage.setItem('rkn_active_effects', JSON.stringify(activeEffects));
                if(codeStr === 'RKNPIDORI') generateRoulette();
            }
            saveGame();
        }

        function startEffectsLoop() {
            if(uiUpdateInterval) clearInterval(uiUpdateInterval);
            uiUpdateInterval = setInterval(() => {
                const now = Date.now();
                const container = document.getElementById('effectsContainer');
                container.innerHTML = '';
                
                for (const [code, endTime] of Object.entries(activeEffects)) {
                    if (endTime > now) {
                        const left = endTime - now;
                        const min = Math.floor(left / 60000);
                        const sec = Math.floor((left % 60000) / 1000);
                        const div = document.createElement('div');
                        let color = 'eff-green', label = code;
                        
                        if(code === 'RKNPIDORI') label = "–£–õ–¨–¢–†–ê–ë–ê–ù 30%";
                        if(code === 'CORRUPTION') { color = 'eff-purple'; label = "–°–ö–ò–î–ö–ê 50%"; }
                        if(code === 'MINING') { color = 'eff-blue'; label = "–î–û–•–û–î x5"; }
                        if(code === 'FLASH') { color = 'eff-red'; label = "–ë–´–°–¢–†–´–ô –°–ü–ò–ù"; }

                        div.className = `effect-badge ${color}`;
                        div.innerHTML = `<span>${label}</span><span>${min}:${sec < 10 ? '0' : ''}${sec}</span>`;
                        container.appendChild(div);
                    } else {
                        delete activeEffects[code];
                        localStorage.setItem('rkn_active_effects', JSON.stringify(activeEffects));
                        if(code === 'RKNPIDORI') generateRoulette();
                    }
                }
            }, 1000);
        }

        function getGlobalMultiplier() {
            let m = 1;
            if((activeEffects['MINING'] || 0) > Date.now()) m *= 5;
            return m;
        }

        // --- –†–£–õ–ï–¢–ö–ê ---
        function spinRoulette() {
            if (isSpinning) return;
            isSpinning = true;
            document.getElementById('spinBtn').classList.remove('active');

            // –°–Ω–∏–∂–∞–µ–º VPN –ø—Ä–∏ —Å–ø–∏–Ω–µ
            vpnLevel = Math.max(0, vpnLevel - 5);
            updateVPNUI();

            let selectedApp, stopIndex;
            if (forceUltra) {
                stopIndex = rouletteList.findIndex((item, idx) => idx > 300 && item.isUltra);
                if(stopIndex === -1) { stopIndex = 500; rouletteList[stopIndex] = { name: "–£–õ–¨–¢–†–ê–ë–ê–ù", img: "logo.png", isUltra: true }; }
                forceUltra = false;
            } else { stopIndex = Math.floor(Math.random() * 500) + 500; }
            selectedApp = rouletteList[stopIndex];

            const center = document.getElementById('rouletteBox').offsetWidth / 2;
            const offset = -((stopIndex * SLOT_WIDTH) + MARGIN_SIDE + (CARD_WIDTH / 2) - center);
            const isFlash = (activeEffects['FLASH'] || 0) > Date.now();
            const dur = isFlash ? 0.5 : 4;

            track.style.transition = `transform ${dur}s cubic-bezier(0.1, 0.9, 0.2, 1)`;
            track.style.transform = `translateX(${offset}px)`;

            setTimeout(() => { showActionChoice(selectedApp); isSpinning = false; }, dur * 1000);
        }

        function showActionChoice(app) {
            if(app.isUltra) { triggerUltraReward(); return; }
            document.getElementById('selectedAppImg').src = app.img;
            document.getElementById('selectedAppName').innerText = app.name;
            document.getElementById('actionModal').style.display = 'flex';
        }

        function triggerUltraReward() {
            const base = 200000 * 32; 
            const sData = skinItems.find(i => i.id === currentSkinId);
            currentWinAmount = base * (sData ? sData.mult : 1) * getGlobalMultiplier();
            document.getElementById('resultStamp').innerText = "–£–õ–¨–¢–†–ê–ë–ê–ù";
            document.getElementById('moneyText').innerText = currentWinAmount.toLocaleString() + ' ‚ÇΩ';
            document.getElementById('rewardModal').style.display = 'flex';
        }

        function chooseAction(type) {
            document.getElementById('actionModal').style.display = 'none';
            document.getElementById('resultStamp').innerText = type;
            let min = 20000, max = 50000;
            if(type === '–ó–ê–ú–ï–î–õ–ò–¢–¨') { min = 50000; max = 80000; }
            if(type === '–ó–ê–ë–ê–ù–ò–¢–¨') { min = 100000; max = 200000; }
            const sData = skinItems.find(i => i.id === currentSkinId);
            const m = (sData ? sData.mult : 1) * getGlobalMultiplier();
            const raw = Math.floor(Math.random() * (max*m - min*m + 1)) + min*m;
            currentWinAmount = Math.ceil(raw / 100) * 100;
            document.getElementById('moneyText').innerText = currentWinAmount.toLocaleString() + ' ‚ÇΩ';
            document.getElementById('rewardModal').style.display = 'flex';
        }

        function collectMoney() {
            balance += currentWinAmount;
            saveGame();
            document.getElementById('rewardModal').style.display = 'none';
            document.getElementById('spinBtn').classList.add('active');
            track.style.transition = "none";
            track.style.transform = "translateX(0px)";
        }

        // --- –ú–ê–ì–ê–ó–ò–ù –õ–û–ì–ò–ö–ê ---
        function openShop() { switchTab('skins'); document.getElementById('shopModal').style.display = 'flex'; }
        function closeShop() { document.getElementById('shopModal').style.display = 'none'; }
        
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.shop-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`button[onclick="switchTab('${tab}')"]`).classList.add('active');
            
            if(tab === 'skins') { document.getElementById('shopSkins').classList.add('active'); renderSkins(); }
            if(tab === 'afk') { document.getElementById('shopAFK').classList.add('active'); renderAFK(); }
            if(tab === 'tech') { document.getElementById('shopTech').classList.add('active'); renderTech(); }
            if(tab === 'sec') { document.getElementById('shopSec').classList.add('active'); renderSec(); }
        }

        function renderSkins() {
            const list = document.getElementById('shopSkins'); list.innerHTML = '';
            const isDisc = (activeEffects['CORRUPTION'] || 0) > Date.now();
            skinItems.forEach(item => {
                const div = document.createElement('div'); div.className = 'shop-item';
                const owned = inventory.includes(item.id);
                const equipped = currentSkinId === item.id;
                let price = item.price;
                let priceHtml = item.price > 0 ? item.price.toLocaleString() : '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ';
                if(isDisc && item.price > 0) {
                    price = Math.floor(item.price * 0.5);
                    priceHtml = `<span class="old-price">${item.price.toLocaleString()}</span> <span style="color:#00ff00">${price.toLocaleString()}</span>`;
                }
                let btn = `<button class="buy-btn" onclick="buySkin('${item.id}', ${price})">–ö—É–ø–∏—Ç—å</button>`;
                if(owned) btn = `<button class="buy-btn" style="background:#2196f3" onclick="equip('${item.id}')">–ù–∞–¥–µ—Ç—å</button>`;
                if(equipped) btn = `<button class="buy-btn equipped">–ù–∞–¥–µ—Ç–æ</button>`;
                
                div.innerHTML = `
                    <div class="shop-item-info">
                        <div style="font-weight:bold;">${item.name}</div>
                        <div style="font-size:11px; color:#aaa">${item.desc}</div>
                        <div class="item-mult">–î–æ—Ö–æ–¥: x${item.mult}</div>
                        <div style="color:#ffd700; font-size:13px;">${priceHtml}</div>
                    </div>
                    ${btn}`;
                list.appendChild(div);
            });
        }

        function renderAFK() {
            const list = document.getElementById('shopAFK'); list.innerHTML = '';
            const isDisc = (activeEffects['CORRUPTION'] || 0) > Date.now();
            afkItems.forEach(item => {
                const div = document.createElement('div'); div.className = 'shop-item';
                const count = afkInventory[item.id] || 0;
                
                // –ò–ù–§–õ–Ø–¶–ò–Ø: –¶–ï–ù–ê –†–ê–°–¢–ï–¢ –ù–ê 15%
                let basePrice = Math.floor(item.price * Math.pow(1.15, count));
                
                let price = basePrice;
                let priceHtml = price.toLocaleString();
                if(isDisc) {
                    price = Math.floor(basePrice * 0.5);
                    priceHtml = `<span class="old-price">${basePrice.toLocaleString()}</span> <span style="color:#00ff00">${price.toLocaleString()}</span>`;
                }
                div.innerHTML = `
                    <div class="shop-item-info">
                        <div style="font-weight:bold;">${item.name} <span style="color:white; background:#444; padding:2px 5px; border-radius:4px; font-size:10px;">${count}</span></div>
                        <div style="font-size:11px; color:#aaa">${item.desc}</div>
                        <div class="item-mult" style="color:#00aaff">+${item.income.toLocaleString()} ‚ÇΩ/—Å–µ–∫</div>
                        <div style="color:#ffd700; font-size:13px;">${priceHtml}</div>
                    </div>
                    <button class="buy-btn" onclick="buyAFK('${item.id}')">–ö—É–ø–∏—Ç—å</button>`;
                list.appendChild(div);
            });
        }

        function renderTech() {
            const list = document.getElementById('shopTech'); list.innerHTML = '';
            techItems.forEach(item => {
                if(techInventory.includes(item.id)) return; // –°–∫—Ä—ã–≤–∞—Ç—å –∫—É–ø–ª–µ–Ω–Ω–æ–µ
                const div = document.createElement('div'); div.className = 'shop-item';
                div.innerHTML = `
                    <div class="shop-item-info">
                        <div style="font-weight:bold;">${item.name}</div>
                        <div style="font-size:11px; color:#aaa">${item.desc}</div>
                        <div style="color:#ffd700; font-size:13px;">${item.price.toLocaleString()}</div>
                    </div>
                    <button class="buy-btn" onclick="buyTech('${item.id}', ${item.price})">–ò–∑—É—á–∏—Ç—å</button>`;
                list.appendChild(div);
            });
            if(list.innerHTML === '') list.innerHTML = '<div style="padding:20px; color:#666;">–í—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏–∑—É—á–µ–Ω—ã</div>';
        }

        function renderSec() {
            const list = document.getElementById('shopSec'); list.innerHTML = '';
            secItems.forEach(item => {
                const div = document.createElement('div'); div.className = 'shop-item';
                div.innerHTML = `
                    <div class="shop-item-info">
                        <div style="font-weight:bold;">${item.name}</div>
                        <div style="font-size:11px; color:#aaa">${item.desc}</div>
                        <div style="color:#ffd700; font-size:13px;">${item.price.toLocaleString()}</div>
                    </div>
                    <button class="buy-btn" onclick="buySec('${item.id}', ${item.price})">–ö—É–ø–∏—Ç—å</button>`;
                list.appendChild(div);
            });
        }

        function buySkin(id, price) {
            if(balance >= price) {
                balance -= price; inventory.push(id);
                saveGame(); renderSkins(); updateBalanceUI();
            } else alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!");
        }

        function buyAFK(id) {
            const item = afkItems.find(i => i.id === id);
            const count = afkInventory[id] || 0;
            // –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã —Å —É—á–µ—Ç–æ–º –∏–Ω—Ñ–ª—è—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏
            let price = Math.floor(item.price * Math.pow(1.15, count));
            if((activeEffects['CORRUPTION'] || 0) > Date.now()) price = Math.floor(price * 0.5);

            if(balance >= price) {
                balance -= price;
                afkInventory[id] = count + 1;
                saveGame(); renderAFK(); updateBalanceUI();
            } else alert("–ù—É–∂–Ω–æ: " + price.toLocaleString());
        }

        function buyTech(id, price) {
            if(balance >= price) {
                balance -= price;
                techInventory.push(id);
                saveGame(); renderTech(); updateBalanceUI();
            } else alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!");
        }

        function buySec(id, price) {
            if(balance >= price) {
                balance -= price;
                const item = secItems.find(i => i.id === id);
                if(item.action === 'reduce_vpn') {
                    vpnLevel = Math.max(0, vpnLevel - item.val);
                    updateVPNUI();
                    alert("–£—Ä–æ–≤–µ–Ω—å VPN —Å–Ω–∏–∂–µ–Ω!");
                }
                if(item.action === 'fix_server') {
                    if(isServerBroken) {
                        isServerBroken = false;
                        alert("–°–µ—Ä–≤–µ—Ä –ø–æ—á–∏–Ω–µ–Ω!");
                    } else {
                        alert("–°–µ—Ä–≤–µ—Ä–∞ –≤ –ø–æ—Ä—è–¥–∫–µ, –¥–µ–Ω—å–≥–∏ –ø–æ—Ç—Ä–∞—á–µ–Ω—ã –∑—Ä—è.");
                    }
                }
                saveGame(); updateBalanceUI();
            } else alert("–ú–∞–ª–æ –¥–µ–Ω–µ–≥!");
        }

        function equip(id) {
            currentSkinId = id; localStorage.setItem('rkn_skin', id);
            applySkin(id);
            if(id === 'the_end') { rknAudio.currentTime = 0; rknAudio.play().catch(e=>{}); } 
            else { rknAudio.pause(); rknAudio.currentTime = 0; }
            renderSkins();
        }

        function applySkin(id) {
            const box = document.getElementById('rouletteBox'); box.className = 'roulette-container';
            const item = skinItems.find(i => i.id === id);
            if(item && item.class) box.classList.add(item.class);
        }

        // –ó–∞–ø—É—Å–∫
        init();
    </script>
</body>
</html> 
